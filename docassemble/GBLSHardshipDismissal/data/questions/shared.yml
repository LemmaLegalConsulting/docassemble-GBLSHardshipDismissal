---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - main.yml
  - dashboard.yml
  - docassemble.AssemblyLine:al_package.yml
---
objects:
  - clients: ALPeopleList.using(there_are_any=True, complete_attribute='complete')
  - clients[i].cases: DAList.using(there_are_any=True, object_type=DAObject, complete_attribute = 'complete')
---
modules:
  - docassemble.demo.accordion
---
code: |
  active_sessions = find_matching_sessions(
      "", 
      user_id="all", 
      limit=50,
      filenames=[
        "docassemble.playground128SSIHardship:main.yml",
      ],
      exclude_newly_started_sessions=False
  )

  load_active_sessions = True
---
# code: |
#   load_interview_answers(
#       old_interview_filename=recent_sessions[recent_interview]["filename"], 
#       old_session_id=recent_sessions[recent_interview]["key"]
#   )
#   load_existing_client_data = True
---
###################### Object/Code Blocks Start ######################
---
code: |
  clients[i].name.first
  clients[i].complete = True
---
code: |
  clients[i].cases[j].case_number
  clients[i].cases[j].client_full_name
  clients[i].cases[j].complete = True
---
code: | 
  clients[i].cases[j].client_full_name = clients[i].name_full()
---
###################### Questions Start ######################
---
id: client info
sets:
  - clients[i].name.first
question: |
  Client Info 
fields:
  - What is the client ID?: clients[i].client_id
  - code: |
      clients[i].name_fields()
---
id: case info
sets:
  - clients[i].cases[j].case_number
question: |
  Add case for ${ clients[i] }
fields:
  - What is the case number?: clients[i].cases[j].case_number
---
id: clients there_is_another
question: |
  Add another client
fields:
  - Do you want to add another client?: clients.there_is_another
    datatype: yesnoradio
---
id: cases there_is_another
question: |
  Add another case
fields:
  - Do you want to add another case?: clients[i].cases.there_is_another
    datatype: yesnoradio
---